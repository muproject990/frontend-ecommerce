{"version":3,"file":"static/js/479.36989361.chunk.js","mappings":"iMAIe,SAASA,IACtB,MAAMC,GAAeC,EAAAA,EAAAA,IAAGC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,2YAqBlB,QAAEC,EAAO,MAAEC,EAAK,KAAEC,EAAI,UAAEC,IAAcC,EAAAA,EAAAA,GAKzCR,EAAc,CACfS,UAAW,CACTC,MAAO,EACPC,MAAO,OA6BX,IAlBAC,EAAAA,EAAAA,YAAU,KACR,SAASC,EAAgBC,GAErBC,OAAOC,YAAcC,SAASC,gBAAgBC,WAC9CF,SAASC,gBAAgBE,eAEzBC,QAAQC,IAAQ,OAAJhB,QAAI,IAAJA,OAAI,EAAJA,EAAMiB,YAAYC,SAAU,aAChC,OAAJlB,QAAI,IAAJA,GAAAA,EAAMiB,YAAYC,SAASC,cAC7BJ,QAAQC,IAAI,gBAflBf,EAAU,CACRE,UAAW,CACTC,MAAO,EACPC,OAAW,OAAJL,QAAI,IAAJA,OAAI,EAAJA,EAAMiB,YAAYC,SAASE,WAAWC,aAAc,QAgB/D,CAEA,OADAV,SAASW,iBAAiB,SAAUf,GAC7B,KACLI,SAASY,oBAAoB,SAAUhB,EAAgB,CACxD,GACA,CAACP,IACAD,EACF,OAAOyB,EAAAA,EAAAA,KAAA,OAAAC,SAAK,UAEd,GAAI3B,EAAS,CACX,MAAM4B,EAAe,IAAIC,MAAM,IAAIC,KAAK,GACxC,OACEJ,EAAAA,EAAAA,KAAA,OAAKK,UAAU,mCAAkCJ,UAC/CD,EAAAA,EAAAA,KAAA,OAAKK,UAAU,yBAAwBJ,SACpCC,EAAaI,KAAI,CAACC,EAAGC,KACpBR,EAAAA,EAAAA,KAACS,EAAS,GAAMD,QAK1B,CACA,OACER,EAAAA,EAAAA,KAAA,OAAKK,UAAU,2CAA0CJ,UACvDD,EAAAA,EAAAA,KAAA,OAAKK,UAAU,4CAA2CJ,SACvDzB,GACCA,EAAKiB,aACLjB,EAAKiB,YAAYiB,SAASJ,KAAI,CAACK,EAAkBJ,KAC/CK,EAAAA,EAAAA,eAACC,EAAAA,EAAW,IAAKF,EAASG,IAAKP,SAK3C,CAEA,SAASE,IACP,OACET,EAAAA,EAAAA,KAAA,OAAKK,UAAU,yCAAwCJ,UACrDc,EAAAA,EAAAA,MAAA,OAAKV,UAAU,wCAAuCJ,SAAA,EACpDD,EAAAA,EAAAA,KAAA,OAAKK,UAAU,qCACfU,EAAAA,EAAAA,MAAA,OAAKV,UAAU,wBAAuBJ,SAAA,EACpCD,EAAAA,EAAAA,KAAA,OAAKK,UAAU,sBACfU,EAAAA,EAAAA,MAAA,OAAKV,UAAU,YAAWJ,SAAA,EACxBc,EAAAA,EAAAA,MAAA,OAAKV,UAAU,yBAAwBJ,SAAA,EACrCD,EAAAA,EAAAA,KAAA,OAAKK,UAAU,iCACfL,EAAAA,EAAAA,KAAA,OAAKK,UAAU,oCAEjBL,EAAAA,EAAAA,KAAA,OAAKK,UAAU,+BAM3B,C","sources":["components/customer/collections.tsx"],"sourcesContent":["import { gql, useQuery } from \"@apollo/client\";\nimport ProductCard from \"../productCard\";\nimport { useEffect, useRef } from \"react\";\n\nexport default function Collections() {\n  const GET_PRODUCTS = gql`\n    query getProducts($first: Int!, $after: String!) {\n      getProducts(first: $first, after: $after) {\n        products {\n          id\n          name\n          description\n          price\n          url\n          stock\n          images {\n            url\n          }\n        }\n        metaData {\n          hasNextPage\n          lastCursor\n        }\n      }\n    }\n  `;\n  const { loading, error, data, fetchMore } = useQuery<{\n    getProducts: {\n      products: Product[];\n      metaData: { hasNextPage: boolean; lastCursor: number };\n    };\n  }>(GET_PRODUCTS, {\n    variables: {\n      first: 8,\n      after: \"1\",\n    },\n  });\n  function loadMore() {\n    fetchMore({\n      variables: {\n        first: 8,\n        after: data?.getProducts.metaData.lastCursor.toString() || \"1\",\n      },\n    });\n  }\n  useEffect(() => {\n    function handleDocScroll(e: Event) {\n      if (\n        window.innerHeight + document.documentElement.scrollTop >=\n        document.documentElement.offsetHeight\n      ) {\n        console.log(data?.getProducts.metaData, \"meta data\");\n        if (data?.getProducts.metaData.hasNextPage) {\n          console.log(\"loading more\");\n          loadMore();\n        }\n      }\n    }\n    document.addEventListener(\"scroll\", handleDocScroll);\n    return () => {\n      document.removeEventListener(\"scroll\", handleDocScroll);\n    };\n  }, [data]);\n  if (error) {\n    return <div>Error</div>;\n  }\n  if (loading) {\n    const pulseCardNum = new Array(20).fill(0);\n    return (\n      <div className=\"flex items-center justify-center\">\n        <div className=\"grid grid-cols-3 gap-4\">\n          {pulseCardNum.map((i, j) => (\n            <PulseCard key={j} />\n          ))}\n        </div>\n      </div>\n    );\n  }\n  return (\n    <div className=\"flex text-sm items-center justify-center\">\n      <div className=\" sm:grid-cols-2 grid md:grid-cols-3 gap-4\">\n        {data &&\n          data.getProducts &&\n          data.getProducts.products.map((product: Product, i: number) => (\n            <ProductCard {...product} key={i} />\n          ))}\n      </div>\n    </div>\n  );\n}\n\nfunction PulseCard() {\n  return (\n    <div className=\"rounded-md p-4 max-w-sm w-full mx-auto\">\n      <div className=\"animate-pulse flex-col flex space-x-4\">\n        <div className=\"bg-gray-200 h-[240px] w-[200px]\"></div>\n        <div className=\"flex-1 space-y-6 py-1\">\n          <div className=\"h-2 bg-gray-200 \"></div>\n          <div className=\"space-y-3\">\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"h-2 bg-gray-200  col-span-2\"></div>\n              <div className=\"h-2 bg-gray-200  col-span-1\"></div>\n            </div>\n            <div className=\"h-2 bg-gray-100 \"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["Collections","GET_PRODUCTS","gql","_templateObject","_taggedTemplateLiteral","loading","error","data","fetchMore","useQuery","variables","first","after","useEffect","handleDocScroll","e","window","innerHeight","document","documentElement","scrollTop","offsetHeight","console","log","getProducts","metaData","hasNextPage","lastCursor","toString","addEventListener","removeEventListener","_jsx","children","pulseCardNum","Array","fill","className","map","i","j","PulseCard","products","product","_createElement","ProductCard","key","_jsxs"],"sourceRoot":""}