"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[303],{1303:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var r=a(7528),t=a(459),l=a(8029),n=a(8250),i=a(5043),d=a(4858),c=a(579);function o(e){let{children:s}=e;return(0,c.jsx)("div",{className:"z-50 w-full h-full bg-[#000000aa] absolute inset-0 flex items-center justify-center",children:s})}var x,m=a(3664);function u(e){const{register:s,formState:{errors:a},handleSubmit:n}=(0,d.mN)(),o=(0,t.J1)(x||(x=(0,r.A)(["\n    mutation updateProfile(\n      $currentPassword: String!\n      $newPassword: String!\n      $confirmPassword: String!\n    ) {\n      updatePassword(\n        currentPassword: $currentPassword\n        newPassword: $newPassword\n        confirmPassword: $confirmPassword\n      )\n    }\n  "]))),[u,{error:h,data:f,loading:p}]=(0,l.n)(o);const[N,j]=(0,i.useState)(!1);return(0,c.jsx)("div",{children:(0,c.jsxs)("form",{onSubmit:n((function(e){j(!0),u({variables:{...e}}).then((()=>{})).catch((e=>{})).finally((()=>{j(!1)}))})),className:"flex rounded gap-y-4 bg-white flex-col p-4",children:[(0,c.jsx)("h5",{className:"text-gray-700 font-semibold",children:"Change Password"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{...s("currentPassword",{required:"Current password required"}),className:"border p-2",placeholder:"Current password"}),a.currentPassword&&(0,c.jsx)("p",{className:"text-xs",children:(0,c.jsx)("span",{className:"text-red-500",children:a.currentPassword.message})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{...s("newPassword",{required:"New password required"}),className:"border p-2",placeholder:"New password"}),a.newPassword&&(0,c.jsx)("p",{className:"text-xs",children:(0,c.jsx)("span",{className:"text-red-500",children:a.newPassword.message})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{...s("confirmPassword",{required:"confirm password required"}),className:"border p-2",placeholder:"Confirm password"}),a.confirmPassword&&(0,c.jsx)("p",{className:"text-xs",children:(0,c.jsx)("span",{className:"text-red-500",children:a.confirmPassword.message})})]}),(0,c.jsxs)("div",{className:"flex justify-end gap-x-2",children:[(0,c.jsx)("button",{onClick:()=>e.setIsOpenModal(!1),type:"button",className:"bg-gray-200 w-[80px] p-2 text-xs",children:"Discard"}),(0,c.jsx)("button",{type:"submit",className:"bg-gray-700 w-[80px] h-[35px] text-white text-xs p-2",children:N?(0,c.jsx)(m.A,{}):"Change"})]})]})})}var h,f,p=a(3095);function N(){const e=(0,t.J1)(h||(h=(0,r.A)(["\n    query getProfile {\n      getProfile {\n        id\n        email\n        firstName\n        lastName\n        address\n        dateOfBirth\n      }\n    }\n  "]))),s=(0,t.J1)(f||(f=(0,r.A)(["\n    mutation updateProfile(\n      $email: String!\n      $lastName: String!\n      $address: String!\n      $firstName: String!\n      $dateOfBirth: String!\n    ) {\n      updateProfile(\n        email: $email\n        lastName: $lastName\n        firstName: $firstName\n        address: $address\n        dateOfBirth: $dateOfBirth\n      )\n    }\n  "]))),[a,{error:x,loading:N}]=(0,l.n)(s),{data:j,error:w,loading:g}=(0,n.I)(e),{handleSubmit:b,register:v,reset:P,formState:{errors:y}}=(0,d.mN)();(0,i.useEffect)((()=>{null!==j&&void 0!==j&&j.getProfile&&P(j.getProfile)}),[j]);const[S,q]=(0,i.useState)(!0),[$,O]=(0,i.useState)(!1),[C,B]=(0,i.useState)(!1);return w?(0,c.jsx)(p.A,{}):g?(0,c.jsx)("div",{children:"Loading..."}):(0,c.jsxs)("div",{className:"items-center flex-col p-4 gap-2 text-sm flex justify-center",children:[(0,c.jsxs)("form",{onSubmit:b((function(e){B(!0);const{email:s,firstName:r,lastName:t,address:l,dateOfBirth:n}=e;a({variables:{email:s,firstName:r,lastName:t,address:l,dateOfBirth:n}}).then((()=>{})).catch((e=>{})).finally((()=>{B(!1)}))})),className:" flex flex-col gap-2",children:[(0,c.jsx)("h5",{className:" w-full",children:"Profile"}),(0,c.jsx)("fieldset",{disabled:S,children:(0,c.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{...v("email",{required:"Email is required"}),className:"w-full border p-2",placeholder:"Email"}),y.email&&(0,c.jsx)("p",{className:"text-xs absolute",children:(0,c.jsx)("span",{className:"text-red-500",children:y.email.message})})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("input",{...v("firstName",{required:"First name is required"}),className:"p-2 border",placeholder:"First Name"}),y.firstName&&(0,c.jsx)("p",{className:"text-xs absolute",children:(0,c.jsx)("span",{className:"text-red-500",children:y.firstName.message})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("input",{...v("lastName",{required:"Last name is required"}),className:"border p-2",placeholder:"Last Name"}),y.lastName&&(0,c.jsx)("p",{className:"text-xs absolute",children:(0,c.jsx)("span",{className:"text-red-500",children:y.lastName.message})})]})]}),(0,c.jsxs)("div",{className:"flex gap-2 ",children:[(0,c.jsxs)("div",{className:"relative w-full",children:[(0,c.jsx)("input",{...v("address",{required:"Address is required"}),className:"border p-2 w-full",placeholder:"Address"}),y.address&&(0,c.jsx)("p",{className:"text-xs absolute",children:(0,c.jsx)("span",{className:"text-red-500",children:y.address.message})})]}),(0,c.jsxs)("div",{className:"w-full relative",children:[(0,c.jsx)("input",{...v("dateOfBirth",{required:"Date Of Birth is required"}),type:"date",className:"border p-2 w-full"}),y.dateOfBirth&&(0,c.jsx)("p",{className:"text-xs absolute",children:(0,c.jsx)("span",{className:"text-red-500",children:y.dateOfBirth.message})})]})]})]})}),(0,c.jsx)("div",{className:"flex flex-col gap-y-2 ",children:(0,c.jsx)("button",{onClick:()=>O(!0),type:"button",style:{width:"max-content"},className:"underline text-xs text-start text-gray-600",children:"Change password"})}),(0,c.jsxs)("div",{className:"w-full flex items-center justify-end gap-2",children:[(0,c.jsx)("button",{onClick:()=>q((e=>!e)),type:"button",className:"bg-gray-200 w-[80px] hover:bg-gray-300 py-1 px-4",children:"Edit"}),(0,c.jsx)("button",{type:"submit",className:"w-[80px] bg-gray-700 text-white py-1 px-4",children:C?(0,c.jsx)(m.A,{}):"Save"})]})]}),$&&(0,c.jsx)(o,{children:(0,c.jsx)(u,{setIsOpenModal:O})})]})}}}]);
//# sourceMappingURL=303.79ab4422.chunk.js.map